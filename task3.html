<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Task3 Кто хочет стать миллионером?</title>
</head>
<body>
<script>
  "use strict";
    
    // Типа отредактировал.

  /**
   * Объект содержит базу вопросов и ответов.
   * @property {object} questionN             - Объект содержит сам вопрос, варианты ответа и правильный ответ.
   * @property {string} questionN.question    - Cам вопрос.
   * @property {object} questionN.variants    - Варианты ответа.
   * @property {string} questionN.rightAnswer - Правильный ответ
   */
  const questions = {
    question1: {
      question: 'Как называют первого ребенка в семье?',
      variants: {
        A: 'A: Премьер',
        B: 'B: Выскочка',
        C: 'C: Початок',
        D: 'D: Первенец'
      },
      rightAnswer: 'D'
    },
    question2: {
      question: 'Завершите вошедшее в российский фольклор высказывание В. С. Черномырдина: "Хотели как лучше, ' +
      'а получилось ..."',
      variants: {
        A: 'A: Вообще',
        B: 'B: Как всегда',
        C: 'C: Как не надо',
        D: 'D: Как хуже'
      },
      rightAnswer: 'B'
    },
    question3: {
      question: 'При падении чего принято загадывать желание?',
      variants: {
        A: 'A: Камня',
        B: 'B: Дисциплины',
        C: 'C: Звезды',
        D: 'D: Температуры'
      },
      rightAnswer: 'C'
    },
    question4: {
      question: 'Какой документ выдают выпускнику Вуза?',
      variants: {
        A: 'A: Аттестат зрелости',
        B: 'B: Диплом',
        C: 'C: Справку об освобождении',
        D: 'D: Удостоверение личности'
      },
      rightAnswer: 'B'
    },
    question5: {
      question: 'Куда, согласно пословице, смотрит волк, сколько его ни корми?',
      variants: {
        A: 'A: В лес',
        B: 'B: В поле',
        C: 'C: В миску',
        D: 'D: В степь'
      },
      rightAnswer: 'A'
    },
  };

  /**
   * Объект содержит метод, отвечающий за игровой процесс.
   */
  const game = {
    /**
     * Фунция выполняет игровой процесс.
     * @returns {string} askAgain Возвращает значение Y или N, в зависимости от того что выберет пользователь - играть
     * дальше или нет.
     */
    run() {
      // Обнуляем счет игрока.
      let count = 0;

      // Перебираем вопросы.
      for (const questionN in questions) {
        // Присваиваем переменной объект текущего вопроса.
        const N = questions[questionN];
        // Присваиваем переменной объект с вариантами ответа на текущий вопрос.
        const V = N.variants;
        // Создаем переменную которая будет хранить ответ пользователя.
        let answer;

        // Запускаем цикл, который будет спрашивать пользователя до посинения, пока тот не введет нужную букву.
        while (true) {
          // Выводим пользователю вопрос и варианты ответа, преобразуем букву к верхнему регистру, если вдруг введет
          // в нижнем, и присваиваем переменной.
          answer = (prompt(N.question + '\n' + V.A + '\n' + V.B + '\n' + V.C + '\n' + V.D +
            '\nQ - завершить игру.')).toUpperCase();
          // Первым делом проверяем, не хочет ли он выйти. Если да, то прерываем цикл.
          if (answer === 'Q') {
            break;
            // Далее проверяем не вводит ли он русские буквы вместо латинских.
          } else if (answer === 'А' || answer === 'Б' || answer === 'В' || answer === 'С' || answer === 'Д') {
            alert('Вводите латинские буквы A, B, C или D.');
            // Далее проверяем вводит ли он нужные буквы.
          } else if (answer !== 'A' && answer !== 'B' && answer !== 'C' && answer !== 'D') {
            alert('Введите букву A, B, C или D.');
            // Если буква введена правильно, тогда сравниваем с правильным ответом. Если правильно, то поздравляем,
          } else if (answer === N.rightAnswer) {
            alert('Правильно!');
            // и награждаем очком.
            count += 1;
            break;
            // Если ответ неверный, тогда выводим правильный ответ.
          } else {
            alert('Правильный ответ ' + V[N.rightAnswer]);
            break;
          }
        }
        // Далее задаем новый вопрос, а если пользователь хотел выйти, то больше не задаем.
        if (answer === 'Q') {
          break;
        }
      }
      // Сообщаем количество правильных ответов.
      alert(`Угадано ${count} из 5 вопросов.`);

      // Интересуемся, не хочет ли он (она) еще разок сыграть.
      let askAgain = (prompt('Хотите сыграть еще? Y/N')).toUpperCase();
      // Приводим ответ к верхнему регистру и проверяем на валидность.
      while (true) {
        // Если пользователь ввел правильную букву, тогда возвращаем значение в начало игры.
        if (askAgain === 'Y' || askAgain === 'N') {
          return askAgain;
          // Если буква не правильная, то спрашиваем до посинения пока не введет нормальную букву.
        } else {
          askAgain = (prompt('Введите Y или N')).toUpperCase();
        }
      }
    }
  };

  // Приветствуем игрока при первом запуске.
  alert('Приветствуем Вас на игре "Кто хочет стать миллионером?"');

  // Переменная будет отвечать за повторную игру.
  let again = 'Y';

  // Если это первая игра, или было передано значение повторной игры, то игра запустится.
  while (true) {
    if (again === 'Y') {
      again = game.run();
      //Если было передан отказ от повторной игры, до прощаемся на всегда.
    } else {
      alert('Пока!');
      break;
    }
  }
</script>
</body>
</html>